<%- include('partials/header') %>

<div class="auth-wrapper">
  <div class="auth-card">
    <section class="auth-form">
      <div class="brand">ManageEasy</div>
      <h2>Edit Category</h2>

      <% if (messages && messages.error) { %>
        <div class="alert"><%= Array.isArray(messages.error) ? messages.error.join(' ') : messages.error %></div>
      <% } %>
      <% if (messages && messages.info) { %>
        <div class="alert success"><%= Array.isArray(messages.info) ? messages.info.join(' ') : messages.info %></div>
      <% } %>

      <form action="/categories/edit/<%= category._id %>" method="POST" novalidate>
        <div class="form-group">
          <label for="name">Category Name</label>
          <input id="name" name="name" type="text" required value="<%= category.name %>" />
        </div>

        <div class="form-group">
          <label for="description">Description</label>
          <input id="description" name="description" type="text" value="<%= category.description %>" />
        </div>

        <!-- âœ… Parent Category Dropdown -->
        <div class="form-group">
          <label for="parent">Parent Category</label>
          <select id="parent" name="parent">
            <option value="">-- None --</option>
            <% parents.forEach(function(p) { %>
              <option value="<%= p._id %>" <%= category.parent && category.parent.toString() === p._id.toString() ? "selected" : "" %>>
                <%= p.name %>
              </option>
            <% }) %>
          </select>
        </div>

        <div class="form-group">
          <label for="status">Status</label>
          <select id="status" name="status" required>
            <option value="Active" <%= category.status === 'Active' ? 'selected' : '' %>>Active</option>
            <option value="Inactive" <%= category.status === 'Inactive' ? 'selected' : '' %>>Inactive</option>
          </select>
        </div>

        <div class="form-actions">
          <button class="btn" type="submit">Update Category</button>
          <a href="/categories" class="btn secondary" style="text-decoration:none;">Cancel</a>
        </div>
      </form>
    </section>

    <aside class="auth-welcome">
      <h3>Edit Category</h3>
      <p>Update category details as needed.</p>
    </aside>
  </div>
</div>
